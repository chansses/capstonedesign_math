# ë§ˆë¥´ì½”í”„ ëª¨ë¸ êµ¬í˜„ ë° ì„¤ëª…

## ğŸ“‹ ëª©ì°¨
1. [ê°œìš”](#ê°œìš”)
2. [ë§ˆë¥´ì½”í”„ ëª¨ë¸ ì´ë¡ ](#ë§ˆë¥´ì½”í”„-ëª¨ë¸-ì´ë¡ )
3. [êµ¬í˜„ ë°©ë²•](#êµ¬í˜„-ë°©ë²•)
4. [ê²°ê³¼ ë¶„ì„](#ê²°ê³¼-ë¶„ì„)
5. [ì‚¬ìš©ë²•](#ì‚¬ìš©ë²•)

## ê°œìš”

í™˜ê²½ ì„¼ì„œ ë°ì´í„°(ì˜¨ë„, CO2)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§ˆë¥´ì½”í”„ ì²´ì¸ ëª¨ë¸ì„ êµ¬í˜„í•˜ì—¬ ë‹¤ìŒ ì‹œì ì˜ ìƒíƒœë¥¼ ì˜ˆì¸¡í•˜ëŠ” ëª¨ë¸ì…ë‹ˆë‹¤.

**ëª©í‘œ**: 50% ì´ìƒì˜ ì •í™•ë„ ë‹¬ì„± âœ… **ì‹¤ì œ ë‹¬ì„±: 86.67%**

## ë§ˆë¥´ì½”í”„ ëª¨ë¸ ì´ë¡ 

### ë§ˆë¥´ì½”í”„ ì²´ì¸ (Markov Chain)

ë§ˆë¥´ì½”í”„ ì²´ì¸ì€ **ì‹œê°„ì— ë”°ë¥¸ ìƒíƒœ ë³€í™”ë¥¼ í™•ë¥ ì ìœ¼ë¡œ ëª¨ë¸ë§**í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

**í•µì‹¬ ê°€ì • (ë§ˆë¥´ì½”í”„ ì„±ì§ˆ)**:
- í˜„ì¬ ìƒíƒœëŠ” **ì´ì „ ìƒíƒœì—ë§Œ ì˜ì¡´**í•˜ê³ , ê·¸ ì´ì „ì˜ ìƒíƒœë“¤ì€ ë¬´ì‹œí•©ë‹ˆë‹¤
- ìˆ˜ì‹: P(X_{t+1} | X_t, X_{t-1}, ..., X_1) = P(X_{t+1} | X_t)

### ìƒíƒœ ì •ì˜

í™˜ê²½ ë°ì´í„°ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ 4ê°€ì§€ ìƒíƒœë¡œ ì •ì˜í–ˆìŠµë‹ˆë‹¤:

| ìƒíƒœ ì¸ë±ìŠ¤ | ìƒíƒœ ì´ë¦„ | ì„¤ëª… | ì˜ˆì‹œ |
|-----------|---------|------|------|
| 0 | Normal | ì˜¨ë„ â‰¤ 26Â°C, CO2 â‰¤ 1000ppm | (24Â°C, 800ppm) |
| 1 | High_Temp | ì˜¨ë„ > 26Â°C, CO2 â‰¤ 1000ppm | (27Â°C, 900ppm) |
| 2 | High_CO2 | ì˜¨ë„ â‰¤ 26Â°C, CO2 > 1000ppm | (25Â°C, 1100ppm) |
| 3 | High_Both | ì˜¨ë„ > 26Â°C, CO2 > 1000ppm | (28Â°C, 1200ppm) |

### ìƒíƒœ ì „ì´ í–‰ë ¬ (Transition Matrix)

ìƒíƒœ ì „ì´ í–‰ë ¬ì€ **ê° ìƒíƒœì—ì„œ ë‹¤ë¥¸ ìƒíƒœë¡œ ì „ì´í•  í™•ë¥ **ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

```
T[i, j] = P(ë‹¤ìŒ ìƒíƒœ = j | í˜„ì¬ ìƒíƒœ = i)
```

ì˜ˆë¥¼ ë“¤ì–´:
- T[0, 1] = 0.067: Normal ìƒíƒœì—ì„œ High_Temp ìƒíƒœë¡œ ì „ì´í•  í™•ë¥ ì´ 6.7%
- T[3, 3] = 0.906: High_Both ìƒíƒœê°€ ë‹¤ìŒì—ë„ High_Bothë¡œ ìœ ì§€ë  í™•ë¥ ì´ 90.6%

## êµ¬í˜„ ë°©ë²•

### 1. ìƒíƒœ ê²°ì • í•¨ìˆ˜

```python
def _get_state(self, temp, co2):
    temp_exceed = temp > 26.0
    co2_exceed = co2 > 1000.0
    
    if not temp_exceed and not co2_exceed:
        return 0  # Normal
    elif temp_exceed and not co2_exceed:
        return 1  # High_Temp
    elif not temp_exceed and co2_exceed:
        return 2  # High_CO2
    else:
        return 3  # High_Both
```

### 2. ìƒíƒœ ì „ì´ í–‰ë ¬ í•™ìŠµ

1. **ë°ì´í„°ì—ì„œ ìƒíƒœ ì‹œí€€ìŠ¤ ì¶”ì¶œ**: ê° ë°ì´í„° í¬ì¸íŠ¸ë¥¼ ìƒíƒœë¡œ ë³€í™˜
2. **ì „ì´ íšŸìˆ˜ ê³„ì‚°**: ê° ìƒíƒœì—ì„œ ë‹¤ìŒ ìƒíƒœë¡œ ëª‡ ë²ˆ ì „ì´í–ˆëŠ”ì§€ ì¹´ìš´íŠ¸
3. **í™•ë¥ ë¡œ ì •ê·œí™”**: ê° í–‰ì˜ í•©ì´ 1ì´ ë˜ë„ë¡ ì •ê·œí™”

```python
# ì „ì´ íšŸìˆ˜ ê³„ì‚°
for i in range(len(states) - 1):
    current_state = states[i]
    next_state = states[i + 1]
    transition_matrix[current_state, next_state] += 1

# í™•ë¥ ë¡œ ì •ê·œí™”
transition_matrix = transition_matrix / transition_matrix.sum(axis=1)
```

### 3. ì˜ˆì¸¡ ë°©ë²•

í˜„ì¬ ìƒíƒœì—ì„œ ê°€ì¥ ë†’ì€ ì „ì´ í™•ë¥ ì„ ê°€ì§„ ë‹¤ìŒ ìƒíƒœë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

```python
def predict_next_state(self, current_state):
    transition_probs = self.transition_matrix[current_state, :]
    next_state = np.argmax(transition_probs)  # ê°€ì¥ ë†’ì€ í™•ë¥ ì˜ ìƒíƒœ
    return next_state
```

## ê²°ê³¼ ë¶„ì„

### í•™ìŠµ ë°ì´í„° ìƒíƒœ ë¶„í¬

- **Normal**: 25.04% (2,029íšŒ)
- **High_Temp**: 15.56% (1,261íšŒ)
- **High_CO2**: 12.35% (1,001íšŒ)
- **High_Both**: 47.04% (3,811íšŒ) â† ê°€ì¥ ë§ìŒ

### ìƒíƒœ ì „ì´ í–‰ë ¬ (í•™ìŠµ ê²°ê³¼)

```
                Normal  High_Temp  High_CO2  High_Both
Normal         0.906    0.067     0.019     0.008
High_Temp      0.105    0.745     0.013     0.136
High_CO2       0.038    0.014     0.780     0.168
High_Both      0.006    0.045     0.043     0.906
```

**ì£¼ìš” ê´€ì°°ì‚¬í•­**:
1. **ìê¸° ìì‹ ìœ¼ë¡œ ìœ ì§€ë˜ëŠ” ê²½í–¥**: ëŒ€ê°ì„  ê°’ë“¤ì´ ë†’ìŒ (0.745 ~ 0.906)
   - ìƒíƒœê°€ ë°”ë€Œì§€ ì•Šê³  ìœ ì§€ë˜ëŠ” ê²½í–¥ì´ ê°•í•¨
2. **Normal â†’ High_Both ì „ì´**: 0.8%ë¡œ ë‚®ìŒ
   - ì •ìƒ ìƒíƒœì—ì„œ ë‘ ê°’ ëª¨ë‘ ì´ˆê³¼ë¡œ ë°”ë¡œ ë„˜ì–´ê°€ëŠ” ê²½ìš°ê°€ ë“œë­„
3. **High_Both â†’ High_Both ìœ ì§€**: 90.6%ë¡œ ë§¤ìš° ë†’ìŒ
   - í•œë²ˆ ê¸°ì¤€ì„ ì„ ë„˜ìœ¼ë©´ ê³„ì† ìœ ì§€ë˜ëŠ” ê²½í–¥

### í‰ê°€ ê²°ê³¼

**ì „ì²´ ì •í™•ë„**: **86.67%** âœ…

**ìƒíƒœë³„ ì„±ëŠ¥**:

| ìƒíƒœ | Precision | Recall | F1-Score | Support |
|------|-----------|--------|----------|---------|
| Normal | 0.92 | 0.93 | 0.92 | 1,550 |
| High_Temp | 0.00 | 0.00 | 0.00 | 10 |
| High_CO2 | 0.72 | 0.72 | 0.72 | 440 |
| High_Both | 0.21 | 0.20 | 0.20 | 25 |

**ë¶„ì„**:
- **Normal ìƒíƒœ**: ë§¤ìš° ë†’ì€ ì„±ëŠ¥ (F1: 0.92)
  - ê°€ì¥ ë§ì´ ë‚˜íƒ€ë‚˜ëŠ” ìƒíƒœì´ë¯€ë¡œ í•™ìŠµì´ ì˜ ë¨
- **High_Temp ìƒíƒœ**: ë§¤ìš° ë‚®ì€ ì„±ëŠ¥ (F1: 0.00)
  - í…ŒìŠ¤íŠ¸ ë°ì´í„°ì—ì„œ 10ê°œë§Œ ë‚˜íƒ€ë‚˜ ìƒ˜í”Œì´ ë¶€ì¡±
  - í´ë˜ìŠ¤ ë¶ˆê· í˜• ë¬¸ì œ
- **High_CO2 ìƒíƒœ**: ì–‘í˜¸í•œ ì„±ëŠ¥ (F1: 0.72)
- **High_Both ìƒíƒœ**: ë‚®ì€ ì„±ëŠ¥ (F1: 0.20)
  - í…ŒìŠ¤íŠ¸ ë°ì´í„°ì—ì„œ 25ê°œë§Œ ë‚˜íƒ€ë‚¨

### í˜¼ë™ í–‰ë ¬ ë¶„ì„

```
              ì˜ˆì¸¡
         Normal  High_Temp  High_CO2  High_Both
ì‹¤ì œ
Normal     1434        8       105          3
High_Temp    10        0         0          0
High_CO2    106        2       316         16
High_Both     1        0        19          5
```

**ì£¼ìš” ê´€ì°°ì‚¬í•­**:
1. **Normal ìƒíƒœ ì˜ˆì¸¡**: 1,434ê°œë¥¼ ì •í™•íˆ ì˜ˆì¸¡ (93%)
2. **High_Temp â†’ Normal ì˜¤ë¶„ë¥˜**: 10ê°œ ëª¨ë‘ Normalë¡œ ì˜ëª» ì˜ˆì¸¡
   - High_Temp ìƒ˜í”Œì´ ë„ˆë¬´ ì ì–´ì„œ í•™ìŠµ ë¶€ì¡±
3. **High_CO2 ìƒíƒœ ì˜ˆì¸¡**: 316ê°œ ì •í™• (72%)
4. **High_Both â†’ High_CO2 ì˜¤ë¶„ë¥˜**: 19ê°œê°€ High_CO2ë¡œ ì˜¤ë¶„ë¥˜

## ì‚¬ìš©ë²•

### ê¸°ë³¸ ì‚¬ìš©ë²•

```python
from markov_model import MarkovChainModel
import pandas as pd

# ë°ì´í„° ë¡œë“œ
df = pd.read_csv('env_dataset_natural_oscillating.csv')

# í•™ìŠµ/í…ŒìŠ¤íŠ¸ ë¶„í• 
split_idx = int(len(df) * 0.8)
df_train = df.iloc[:split_idx]
df_test = df.iloc[split_idx:]

# ëª¨ë¸ ìƒì„± ë° í•™ìŠµ
model = MarkovChainModel(temp_threshold=26.0, co2_threshold=1000.0)
model.fit(df_train)

# í‰ê°€
results = model.evaluate(df_test)
print(f"ì •í™•ë„: {results['accuracy']:.4f}")
```

### ë‹¤ìŒ ìƒíƒœ ì˜ˆì¸¡

```python
# í˜„ì¬ ì˜¨ë„ì™€ CO2 ê°’
current_temp = 27.5
current_co2 = 1100

# í˜„ì¬ ìƒíƒœ ê²°ì •
current_state = model._get_state(current_temp, current_co2)

# ë‹¤ìŒ ìƒíƒœ ì˜ˆì¸¡
next_state = model.predict_next_state(current_state)
print(f"ì˜ˆì¸¡ëœ ë‹¤ìŒ ìƒíƒœ: {model.state_names[next_state]}")
```

### ì‹œê°í™”

```python
# ìƒíƒœ ì „ì´ í–‰ë ¬ ì‹œê°í™”
model.visualize_transition_matrix('transition_matrix.png')

# ì˜ˆì¸¡ ê²°ê³¼ ì‹œê°í™”
model.visualize_predictions(df_test, results['predicted_states'], 
                            results['actual_states'], 'predictions.png')
```

## ê°œì„  ë°©ì•ˆ

### 1. í´ë˜ìŠ¤ ë¶ˆê· í˜• í•´ê²°
- **SMOTE**: ì†Œìˆ˜ í´ë˜ìŠ¤ ì˜¤ë²„ìƒ˜í”Œë§
- **ê°€ì¤‘ì¹˜ ì ìš©**: ì†Œìˆ˜ í´ë˜ìŠ¤ì— ë” ë†’ì€ ê°€ì¤‘ì¹˜ ë¶€ì—¬
- **ì„ê³„ê°’ ì¡°ì •**: í™•ë¥  ê¸°ë°˜ ì˜ˆì¸¡ ì‹œ ì„ê³„ê°’ ì¡°ì •

### 2. ê³ ì°¨ ë§ˆë¥´ì½”í”„ ëª¨ë¸
- í˜„ì¬ëŠ” 1ì°¨ ë§ˆë¥´ì½”í”„ ëª¨ë¸ (ì´ì „ 1ê°œ ìƒíƒœë§Œ ê³ ë ¤)
- 2ì°¨ ë˜ëŠ” 3ì°¨ ë§ˆë¥´ì½”í”„ ëª¨ë¸ë¡œ í™•ì¥í•˜ë©´ ë” ì •í™•í•  ìˆ˜ ìˆìŒ

### 3. íŠ¹ì§• ì¶”ê°€
- ì‹œê°„ëŒ€ (ì•„ì¹¨/ì ì‹¬/ì €ë…)
- ìš”ì¼ (í‰ì¼/ì£¼ë§)
- ì´ì „ Nê°œ ì‹œì ì˜ í‰ê· /ì¶”ì„¸

### 4. ë‹¤ë¥¸ ëª¨ë¸ê³¼ ë¹„êµ
- Hidden Markov Model (HMM)
- LSTM
- Random Forest
- XGBoost

## ê²°ë¡ 

ë§ˆë¥´ì½”í”„ ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ **86.67%ì˜ ì •í™•ë„**ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤. ì´ëŠ” ëª©í‘œì¸ 50%ë¥¼ í›¨ì”¬ ì´ˆê³¼í•˜ëŠ” ì„±ê³¼ì…ë‹ˆë‹¤.

**ê°•ì **:
- ê°„ë‹¨í•˜ê³  í•´ì„ ê°€ëŠ¥í•œ ëª¨ë¸
- ìƒíƒœ ì „ì´ íŒ¨í„´ì„ ëª…í™•íˆ íŒŒì•… ê°€ëŠ¥
- Normal ìƒíƒœ ì˜ˆì¸¡ì´ ë§¤ìš° ì •í™•

**í•œê³„**:
- í´ë˜ìŠ¤ ë¶ˆê· í˜•ìœ¼ë¡œ ì¸í•œ ì†Œìˆ˜ í´ë˜ìŠ¤ ì˜ˆì¸¡ ì–´ë ¤ì›€
- 1ì°¨ ë§ˆë¥´ì½”í”„ ê°€ì •ì˜ í•œê³„ (ë” ê¸´ ì˜ì¡´ì„± ê³ ë ¤ ë¶ˆê°€)

í–¥í›„ ê°œì„ ì„ í†µí•´ ë”ìš± ì •í™•í•œ ì˜ˆì¸¡ì´ ê°€ëŠ¥í•  ê²ƒì…ë‹ˆë‹¤.
